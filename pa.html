<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XMASS Earn 🎄🎅</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            text-align: center;
            background: linear-gradient(to bottom, #000428, #004e92);
            color: #fff;
        }

        #app {
            max-width: 800px;
            margin: auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            color: #333;
            animation: fadeIn 2s ease-in-out;
        }

        h2, h3 {
            color: #004e92;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
        }

        .balance-part {
            border: 2px solid #004e92;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            color: #004e92;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .task-section {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        iframe {
            width: 100%;
            height: 300px;
            border: none;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .claim-btn {
            background-color: #004e92;
            color: white;
            font-size: 16px;
            font-weight: bold;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            display: none;
            margin-top: 10px;
        }

        .claim-btn:disabled {
            background-color: gray;
            cursor: not-allowed;
        }

        footer {
            margin-top: 20px;
            padding: 15px;
            background-color: #004e92;
            color: #fff;
            border-radius: 15px;
            font-size: 16px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <h2>Xmass Earn 🎄🎅</h2>
        <div class="balance-part">
            <div>
                <h3><b>EARNINGS</b></h3>
                <p>Balance: <span id="balance">0</span> RWF</p>
            </div>
        </div>

        <!-- Tasks Section -->
        <h3>Complete tasks to earn money:</h3>

        <!-- Like Task -->
        <div class="task-section">
            <h4>1. Like the video</h4>
            <button class="claim-btn" id="like-task" onclick="completeTask('like', 100, 'https://youtu.be/vYHhd6Efh-0')">Like and Earn 100 RWF</button>
        </div>

        <!-- Subscribe Task -->
        <div class="task-section">
            <h4>2. Subscribe to the channel</h4>
            <button class="claim-btn" id="subscribe-task" onclick="completeTask('subscribe', 200, 'https://youtube.com/@davidrwa250')">Subscribe and Earn 200 RWF</button>
        </div>

        <!-- Comment Task -->
        <div class="task-section">
            <h4>3. Comment on the video</h4>
            <button class="claim-btn" id="comment-task" onclick="completeTask('comment', 150, 'https://youtu.be/vYHhd6Efh-0')">Comment and Earn 150 RWF</button>
        </div>

        <!-- Watch Video Section -->
        <div class="task-section" id="video-1">
            <h4>4. Watch the video</h4>
            <iframe src="https://www.youtube.com/embed/vYHhd6Efh-0?enablejsapi=1" allowfullscreen></iframe>
            <button class="claim-btn" id="claim-1" onclick="claimReward(1, 300)">Claim 300 RWF</button>
        </div>

        <footer>
            <p>🎄 Invite Friends & Spread the Christmas Spirit! 🎅</p>
        </footer>
    </div>

    <script>
        let balance = 0;

        // Fungura balance muri Local Storage igihe page ifunguwe
        const loadBalance = () => {
            const savedBalance = localStorage.getItem("balance");
            if (savedBalance) {
                balance = parseInt(savedBalance, 10);
            }
            updateBalance();
        };

        // Fungura balance ku rubuga
        const updateBalance = () => {
            document.getElementById("balance").textContent = balance;
        };

        // Complete a task (Like, Subscribe, Comment)
        const completeTask = (taskId, reward, link) => {
            const taskBtn = document.getElementById(`${taskId}-task`);
            if (taskBtn.disabled) {
                alert("❌ You have already completed this task!");
                return;
            }

            balance += reward; // Yongeraho amafaranga
            updateBalance();
            saveBalance(); // Bika amafaranga muri Local Storage
            taskBtn.disabled = true; // Fungura button
            taskBtn.textContent = "Completed";
            window.open(link, '_blank'); // Fungura link kuri YouTube
        };

        // Claim reward for watching video
        const claimReward = (videoId, reward) => {
            const claimBtn = document.getElementById(`claim-${videoId}`);
            if (claimBtn.disabled) {
                alert("❌ You have already claimed this reward!");
                return;
            }

            balance += reward;
            updateBalance();
            saveBalance();
            claimBtn.disabled = true;
            claimBtn.textContent = "Claimed";
        };

        // Fungura claim button nyuma y'iminota 2
        const enableClaimButton = (videoId) => {
            setTimeout(() => {
                const claimBtn = document.getElementById(`claim-${videoId}`);
                claimBtn.style.display = "inline-block";
            }, 120000); // Iminota 2
        };

        // Fungura balance igihe page ifunguwe
        window.onload = () => {
            loadBalance();
            enableClaimButton(1);
        };

        // Bika balance muri Local Storage
        const saveBalance = () => {
            localStorage.setItem("balance", balance);
        };
    </script>
</body>
</html>